{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","services/image-api.js","components/Spinner/Spinner.js","components/App.js","index.js"],"names":["module","exports","Searchbar","state","query","handleChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","toast","error","props","onSubmit","reset","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","name","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","largeImageURL","onClick","src","alt","ImageGalleryItemImage","prototype","PropTypes","string","isRequired","func","ImageGallery","data","handleLargeImage","map","id","arrayOf","shape","number","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","largeImg","Button","handleLoadMore","button","api","fetchImage","nextQuery","nextPage","fetch","then","response","ok","json","Spinner","color","height","width","timeout","style","textAlign","App","page","showModal","status","resetPage","toggleModal","prevProps","prevState","scrollTo","top","documentElement","scrollHeight","behavior","prevQuery","prevPage","imageAPI","hits","catch","finally","SearchbarTitle","length","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.57d5cb20.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__DncjJ\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__30xkQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2AxMb\",\"Modal\":\"Modal_Modal__2WBTT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2bkPr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3QF_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__DjWH3\",\"SearchbarTitle\":\"Searchbar_SearchbarTitle__3H8jq\",\"SearchForm\":\"Searchbar_SearchForm__1ac2l\",\"SearchFormButton\":\"Searchbar_SearchFormButton__21S85\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__8f9cn\",\"SearchFormInput\":\"Searchbar_SearchFormInput__VhsfU\"};","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { toast } from \"react-toastify\";\nimport s from \"./Searchbar.module.css\";\n\nclass Searchbar extends Component {\n  state = { query: \"\" };\n\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  handleChange = (event) => {\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    if (this.state.query.trim() === \"\") {\n      return toast.error(\"Введите запрос!\");\n    }\n    this.props.onSubmit(this.state.query);\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ query: \"\" });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            name=\"query\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import PropTypes from \"prop-types\";\nimport s from \"./ImageGalleryItem.module.css\";\n\nconst ImageGalleryItem = ({ webformatURL, largeImageURL, onClick }) => {\n  return (\n    <img\n      src={webformatURL}\n      alt={largeImageURL}\n      className={s.ImageGalleryItemImage}\n      onClick={onClick}\n    />\n  );\n};\n\nImageGalleryItem.prototype = {\n  webformatURL: PropTypes.string.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from \"prop-types\";\nimport s from \"./ImageGallery.module.css\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\n\nconst ImageGallery = ({ data, handleLargeImage }) => {\n  return (\n    <ul className={s.ImageGallery}>\n      {data.map(({ id, webformatURL, largeImageURL }) => (\n        <li key={id} className={s.ImageGalleryItem}>\n          <ImageGalleryItem\n            webformatURL={webformatURL}\n            largeImageURL={largeImageURL}\n            onClick={handleLargeImage}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nImageGallery.prototype = {\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n    }).isRequired\n  ),\n  handleLargeImage: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport s from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nclass Modal extends Component {\n  static propTypes = {\n    largeImg: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (event) => {\n    if (event.code === \"Escape\") {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = (event) => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={this.props.largeImg} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n\nexport default Modal;\n","import PropTypes from \"prop-types\";\nimport s from \"./Button.module.css\";\n\nconst Button = ({ handleLoadMore }) => {\n  return (\n    <button type=\"button\" className={s.button} onClick={handleLoadMore}>\n      Load more\n    </button>\n  );\n};\n\nButton.prototype = {\n  handleLoadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","const API_KEY = \"23088812-5b110276eac3708e5449cfd31\";\nconst BASE_URL = `https://pixabay.com/api`;\n\nconst fetchImage = (nextQuery, nextPage) => {\n  return fetch(\n    `${BASE_URL}/?q=${nextQuery}&page=${nextPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\n  ).then((response) => {\n    if (response.ok) {\n      return response.json();\n    }\n    // return Promise.reject(\n    //   new Error(`По запросу \"${nextQuery}\" ничего не найдено`)\n    // );\n  });\n};\n\nconst api = { fetchImage };\n\nexport default api;\n","import React from \"react\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\n\nconst Spinner = () => {\n  return (\n    <Loader\n      type=\"TailSpin\"\n      color=\"#00BFFF\"\n      height={80}\n      width={80}\n      timeout={3000}\n      style={{ textAlign: \"center\" }}\n    />\n  );\n};\n\nexport default Spinner;\n","import React, { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport s from \"./Searchbar/Searchbar.module.css\";\nimport Searchbar from \"./Searchbar/Searchbar\";\nimport ImageGallery from \"./ImageGallery/ImageGallery\";\nimport Modal from \"./Modal/Modal\";\nimport Button from \"./Button/Button\";\nimport imageAPI from \"../services/image-api\";\nimport Spinner from \"./Spinner/Spinner\";\n\nclass App extends Component {\n  state = {\n    page: 1,\n    data: [],\n    query: null,\n    error: null,\n    showModal: false,\n    largeImg: \"\",\n    status: \"idle\",\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n\n    const prevQuery = prevState.query;\n    const nextQuery = this.state.query;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevPage !== nextPage || prevQuery !== nextQuery) {\n      this.setState({ status: \"pending\" });\n      imageAPI\n        .fetchImage(nextQuery, nextPage)\n        .then(({ hits }) => {\n          this.setState((prevState) => ({\n            data: [\n              ...prevState.data,\n              ...hits.map(({ id, webformatURL, largeImageURL }) => ({\n                id,\n                webformatURL,\n                largeImageURL,\n              })),\n            ],\n          }));\n        })\n        .catch((error) => this.setState({ error, status: \"rejected\" }))\n        .finally(() => this.setState({ status: \"resolved\" }));\n    }\n  }\n\n  handleSubmit = (query) => {\n    this.resetPage();\n    this.setState({ query });\n  };\n\n  resetPage = () => {\n    this.setState({\n      page: 1,\n      data: [],\n      showModal: false,\n      status: \"idle\",\n    });\n  };\n\n  handleLoadMore = () => {\n    this.setState(({ page }) => ({\n      page: page + 1,\n    }));\n  };\n\n  handleLargeImage = (event) => {\n    this.setState({ showModal: true, largeImg: event.currentTarget.alt });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  render() {\n    const { data, status, showModal, query } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleSubmit} />\n\n        {status === \"idle\" && (\n          <h1 className={s.SearchbarTitle}>Введите запрос</h1>\n        )}\n\n        {data.length > 0 && (\n          <ImageGallery data={data} handleLargeImage={this.handleLargeImage} />\n        )}\n\n        {data.length >= 12 && status === \"resolved\" && (\n          <Button handleLoadMore={this.handleLoadMore} />\n        )}\n\n        {data.length === 0 && status === \"resolved\" && (\n          <h2 className={s.SearchbarTitle}>\n            По запросу \"{query}\" ничего не найдено\n          </h2>\n        )}\n\n        {showModal && (\n          <Modal largeImg={this.state.largeImg} onClose={this.toggleModal} />\n        )}\n\n        {status === \"pending\" && <Spinner />}\n\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"modern-normalize/modern-normalize.css\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}